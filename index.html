<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page d'accueil - Suivi d'entraînement</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            max-width: 600px;
            margin: auto;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #2a9d8f;
            font-size: 1.8em;
        }

        p {
            font-size: 1.2em;
            color: #264653;
        }

          /* Style pour l'activité sélectionnée */
          .selected {
            background-color: #2a9d8f; /* Couleur d'arrière-plan pour l'activité sélectionnée */
            color: rgb(1, 1, 1); /* Couleur du texte pour l'activité sélectionnée */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); /* Ombre pour se démarquer */
            transform: scale(1.05); /* Légère augmentation de la taille */
        }


        .activities {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .date-input {
            margin-bottom: 20px; /* Ajustez la valeur selon vos besoins */
            
        }

        .activity-card {
            padding: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .activity-card:hover {
            transform: scale(1.05);
        }

        .activity-title {
            font-size: 1.2em;
            color: #2a9d8f;
            margin-bottom: 10px;
            text-align: center;
        }

        select, input[type="date"], input[type="range"], button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 1em;
            outline: none;
        }

        /* Style de la barre glissante avec dégradé uniquement pour #difficulty */
        #difficulty {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 35px;
            border-radius: 5px;
            background: linear-gradient(to right, rgb(247, 247, 248) 0%,rgb(68, 0, 255) 100%);
            position: relative;
        }

        #difficulty::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 35px;
            height: 35px;
            background-color: #2a9d8f;
            border-radius: 50%;
            cursor: pointer;
        }

        /* Style classique pour toutes les autres barres */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 35px;
            border-radius: 5px;
            background-color: #ddd; /* Couleur de fond grise classique */
            position: relative;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 35px;
            height: 35px;
            background-color: #2a9d8f;
            border-radius: 50%;
            cursor: pointer;
        }

        .range-container {
            position: relative;
            margin-top: 15px;
        }

        .range-values {
            font-size: 1em; /* Augmenter la taille de la police */
            color: #333; /* Couleur plus foncée */
            font-weight: bold; /* Texte en gras */
            margin-bottom: 5px; /* Ajuster l'espacement */
            text-align: center;
            background-color: #e9ecef; /* Arrière-plan gris clair */
            padding: 5px; /* Ajouter du padding */
            border-radius: 5px; /* Coins arrondis */
            border: 1px solid #ccc; /* Ajouter une bordure */
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8em;
            color: #999;
            margin-top: 5px;
            margin-bottom: 10px;
            padding: 0 5px;
        }

        /* Section du formulaire cachée */
        #settings-section {
            display: none; /* Masquer par défaut */
            margin-top: 30px;
        }

        h2 {
            text-align: center;
            color: #2a9d8f;
        }

        button {
            padding: 15px;
            background-color: #2a9d8f;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
            margin-top: 20px;
        }

        button:hover {
            background-color: #23827d;
        }

        /* Styles pour mobile */
        @media (max-width: 600px) {
            h1 {
                font-size: 1.5em;
            }

            p {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>Suivi d'entraînement en ligne</h1>
        <p>Veuillez sélectionner votre type d'entraînement :</p>
    </header>

    <!-- Champ de sélection de la date -->
    <section>
        <label for="date">Choisissez une date :</label>
        <input type="date" id="date" name="date" required class="date-input">
    </section>

    <section class="activities">
        <!-- PMA -->
        <div class="activity-card" id="pma-card">
            <div class="activity-title">PMA</div>
        </div>

        <!-- Musculation -->
        <div class="activity-card" id="muscu-card">
            <div class="activity-title">Musculation</div>
        </div>

        <!-- Cardio -->
        <div class="activity-card" id="cardio-card">
            <div class="activity-title">Cardio</div>
        </div>

        <!-- Navigation -->
        <div class="activity-card" id="navigation-card">
            <div class="activity-title">Navigation</div>
        </div>

        <!-- Gainage/Mobilité -->
        <div class="activity-card" id="gainage-card">
            <div class="activity-title">Gainage/Mobilité</div>
        </div>
    </section>

    <!-- Section des réglages qui apparaîtra après sélection d'une activité -->
    <section id="settings-section">
        <h2>Réglages de l'activité</h2>
        <form id="activity-form">
            <input type="hidden" id="activity" name="activity" value="">

            <label for="difficulty">Niveau de difficulté (1 à 10) :</label>
            <div class="range-values" id="difficulty-value">5</div> <!-- Indicateur déplacé au-dessus -->
            <input type="range" id="difficulty" name="difficulty" min="0" max="10" step="0.5" value="5" oninput="updateDifficulty()">
            <div class="range-labels">
                <span>1</span><span>3</span><span>5</span><span>7</span><span>10</span>
            </div>

            <label for="duration">Durée de l'entraînement (en minutes) :</label>
            <div class="range-values" id="duration-value">60 minutes</div> <!-- Indicateur déplacé au-dessus -->
            <input type="range" id="duration" name="duration" min="10" max="240" step="5" value="60" oninput="updateDuration()">
            <div class="range-labels">
                <span>10</span><span>80</span><span>160</span><span>240</span>
            </div>

            <button type="submit">Envoyer</button>
        </form>
    </section>

    <script>

        // Fonction pour mettre à jour la durée
        function updateDuration() {
            const durationValue = document.getElementById("duration-value");
            const duration = document.getElementById("duration").value;
            durationValue.textContent = `${duration} minutes`;
        }

        // Fonction pour mettre à jour la couleur et la valeur de la barre de difficulté
        function updateDifficulty() {
            const difficulty = document.getElementById('difficulty');
            const value = difficulty.value;
            const difficultyValue = document.getElementById('difficulty-value');

            // Afficher la valeur de la difficulté au-dessus de la barre
            difficultyValue.textContent = value;

            // Calculer la position en pourcentage
            const percentage = ((value - difficulty.min) / (difficulty.max - difficulty.min)) * 100;

            // Dégradé dynamique du vert (1) au rouge (10) en fonction de la valeur
            const color = `linear-gradient(to right, green ${percentage}%, #ddd ${percentage}%)`;

            // Appliquer le dégradé à la barre de range
            difficulty.style.background = color;
        }

        // Initialiser la barre au chargement avec la couleur correcte
        window.onload = function() {
            updateDifficulty();
        };

        // Fonction pour mettre à jour la difficulté avec la couleur fluide
        function updateDifficulty() {
            const difficulty = document.getElementById('difficulty');
            const value = difficulty.value;
            const difficultyValue = document.getElementById('difficulty-value');

            // Afficher la valeur de la difficulté au-dessus de la barre
            difficultyValue.textContent = value;


            // Appliquer la couleur de fond au texte de la valeur
            difficultyValue.style.backgroundColor = bgColor;
        }


        document.addEventListener("DOMContentLoaded", function () {
        const activities = document.querySelectorAll('.activity-card');
        const settingsSection = document.getElementById('settings-section');
        const activityInput = document.getElementById('activity');
        const form = document.getElementById('activity-form');

        // Fonction pour réinitialiser les styles
        function resetActivityStyles() {
            activities.forEach(act => {
                // Réinitialiser tous les styles spécifiques de l'activité
                act.classList.remove('selected'); // Supprime la classe 'selected' si présente
                act.style.backgroundColor = ''; // Réinitialise la couleur de fond à la valeur par défaut
                act.style.color = ''; // Réinitialise la couleur du texte à la valeur par défaut
                act.style.boxShadow = ''; // Réinitialise l'ombre (shadow) à la valeur par défaut
                
                // Si le titre a un style spécifique, on le réinitialise aussi
                const title = act.querySelector('.activity-title');
                if (title) {
                    title.style.color = ''; // Réinitialise la couleur du texte du titre à la valeur par défaut
                }
            });
        }

        // Événement pour chaque activité
        activities.forEach(activity => {
            activity.addEventListener('click', function () {
                resetActivityStyles(); // Réinitialiser les styles des autres cartes d'activités

                // Ajouter la classe 'selected' à l'activité cliquée
                activity.classList.add('selected');
                
                // Appliquer les styles spécifiques à l'activité sélectionnée
                activity.querySelector('.activity-title').style.color = 'white'
                activity.style.backgroundColor = '#2a9d8f'; // Changer la couleur d'arrière-plan
                activity.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.3)'; // Ajouter une ombre

                const activityId = activity.id;  // Récupérer l'ID de l'activité

                // Vérifier si l'activité est la navigation
                if (activityId === 'navigation-card') {
                    window.location.href = 'questionnaire_test.html'; // Rediriger vers la page de navigation
                } else {
                    settingsSection.style.display = 'block'; // Afficher la section des réglages
                    activityInput.value = activity.querySelector('.activity-title').textContent; // Définir l'activité cachée
                }
            });
        });

        // Gérer l'envoi du formulaire
        form.addEventListener('submit', function (event) {
            event.preventDefault(); // Empêche le rechargement de la page
            const formData = new FormData(form);
            const date = document.getElementById('date').value; // Récupérer la date

            // Ajouter la date au FormData
            formData.append('date', date);

            // Envoyer les données au script Google Apps
            fetch('https://script.google.com/macros/s/AKfycbzu5CI9uOcEyxlLfu9aXoJCIKGPuhdkKfv14MpRTcj7NynxIq8aV11pq4yFsPpxVfhQHQ/exec', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                alert(data.result); // Affiche un message de succès
                form.reset(); // Réinitialise le formulaire
                settingsSection.style.display = 'none'; // Masquer la section des réglages

                // Supprimez la sélection après soumission
                resetActivityStyles(); // Réinitialise tous les styles
            })
            .catch(error => console.error('Erreur lors de l\'envoi des données:', error));
        });
    });


    </script>

</body>
</html>






